<div class="modal-header">

    <h4 class="modal-title pull-left">{{title}}</h4>

</div>

<div class="modal-body">

    <div class="panel panel-default">

        <div class="form-horizontal" role="form">

            <div style="padding:10px;margin:10px; ">

                <div class="form-group">
                    <label class="col-lg-3 col-sm-2 control-label required">Code</label>
                    <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                        <input type="text" class="form-control" 
                               [ngModel]="item.productCode | uppercase" 
                               (ngModelChange)="item.productCode=$event" 
                               [ngClass]="{'validation-error': !!item.validationErrors['productCode']}" 
                               [disabled]="!!item.productID">
                    </div>
                    <div class="col-lg-3" *ngIf="!!item.validationErrors['productCode']">
                        <small class="text-danger">
                           {{item.validationErrors['productCode']}}
                        </small>
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-lg-3 col-sm-2 control-label">Name</label>
                    <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                        <input type="text" class="form-control" [(ngModel)]="item.productName" [ngClass]="{'validation-error': !!item.validationErrors['productName']}">
                    </div>
                    <div class="col-lg-3" *ngIf="!!item.validationErrors['productName']">
                        <small class="text-danger">
                            {{item.validationErrors['productName']}}
                        </small>
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-lg-3 col-sm-2 control-label">Description</label>
                    <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                        <input type="text" class="form-control" [(ngModel)]="item.description" [ngClass]="{'validation-error': !!item.validationErrors['description']}">
                    </div>
                    <div class="col-lg-3" *ngIf="!!item.validationErrors['description']">
                        <small class="text-danger">
                            {{item.validationErrors['description']}}
                        </small>
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-lg-3 col-sm-2 control-label">Product Class</label>
                    <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                        <div class="input-group">
                            <input class="form-control"
                                   placeholder="Type to search"
                                   [typeahead]="productClasses" typeaheadOptionField="code" [typeaheadItemTemplate]="productClassTemplate"
                                   (typeaheadLoading)="productClassLoading($event)"
                                   (typeaheadNoResults)="productClassNoResults($event)"
                                   (typeaheadOnSelect)="productClassOnSelect($event)"
                                   (typeaheadOnBlur)="productClassOnBlur($event)"
                                   [ngModel]="item.productClass | uppercase" (ngModelChange)="item.productClass=$event"
                                   [ngClass]="{'validation-error': !!item.validationErrors['productClass']}" />
                            <span class="input-group-btn">
                                <button type="button" class="btn btn-default" (click)="addProductClass()">
                                    <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                                </button>
                            </span>
                        </div>
                    </div>
                    <div class="col-lg-3" *ngIf="!!item.validationErrors['productClass']">
                        <small class="text-danger">
                            {{item.validationErrors['productClass']}}
                        </small>
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-lg-3 col-sm-2 control-label">Product Feature</label>
                    <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                        <div class="input-group">
                            <input class="form-control"
                                   placeholder="Type to search"
                                   [typeahead]="productFeatures" typeaheadOptionField="code" [typeaheadItemTemplate]="productFeatureTemplate"
                                   (typeaheadLoading)="productFeatureLoading($event)"
                                   (typeaheadNoResults)="productFeatureNoResults($event)"
                                   (typeaheadOnSelect)="productFeatureOnSelect($event)"
                                   (typeaheadOnBlur)="productFeatureOnBlur($event)"
                                   [ngModel]="item.productFeature | uppercase" (ngModelChange)="item.productFeature=$event"
                                   [ngClass]="{'validation-error': !!item.validationErrors['productFeature']}" />
                            <span class="input-group-btn">
                                <button type="button" class="btn btn-default" (click)="addProductFeature()">
                                    <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                                </button>
                            </span>
                        </div>
                    </div>
                    <div class="col-lg-3" *ngIf="!!item.validationErrors['productFeature']">
                        <small class="text-danger">
                            {{item.validationErrors['productFeature']}}
                        </small>
                    </div>
                </div>

            </div>

        </div>

    </div>

    <alertbox></alertbox>

</div>

<div class="modal-footer">
    <div class="pull-left">
        <content *ngIf="showUpdateButton">
            <button (click)="updateItem()" class="btn btn-primary">
                Update
            </button>
        </content>
        <content *ngIf="!showUpdateButton">
            <button (click)="updateItem()" class="btn btn-primary">
                Create
            </button>
        </content>
        <button type="button" class="btn btn-default" (click)="bsModalRef.hide()">Close</button>
    </div>
</div>

<ng-template #productClassTemplate let-model="item" let-index="index">
    {{model.code}} | {{model.name}}
</ng-template>

<ng-template #productFeatureTemplate let-model="item" let-index="index">
    {{model.code}} | {{model.name}}
</ng-template>

